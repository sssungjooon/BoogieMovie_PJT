{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nimport createPersistedState from 'vuex-persistedstate';\nimport router from '@/router';\nVue.use(Vuex);\n\n// articles를 movielist로 수정..\n\nconst API_URL = 'http://127.0.0.1:8000';\nexport default new Vuex.Store({\n  plugins: [createPersistedState()],\n  state: {\n    articles: [],\n    movies: [],\n    logedin_user: null,\n    user_info: null,\n    user_detail: null,\n    token: null\n    //isLoggedIn : store.state.token, \n  },\n\n  getters: {\n    isLogin(state) {\n      return state.token ? true : false;\n    }\n  },\n  mutations: {\n    GET_MOVIES(state, movies) {\n      state.movies = movies;\n    },\n    // 회원가입 && 로그인\n    SAVE_TOKEN(state, token) {\n      state.token = token;\n      router.push({\n        name: 'home'\n      });\n    },\n    GET_LOGIN_USER(state, logedin_user) {\n      state.logedin_user = logedin_user;\n      state.user_info = logedin_user;\n    },\n    LOG_OUT(state) {\n      //state.recommend_movies = null\n      state.logedin_user = null;\n      state.token = null;\n      localStorage.removeItem('logedin_user');\n      localStorage.removeItem('token');\n\n      //router.push('/')\n    },\n\n    GET_USER_INFO(state, user_detail) {\n      state.user_detail = user_detail;\n    }\n  },\n  actions: {\n    getMovies(context) {\n      axios({\n        method: 'get',\n        url: `${API_URL}/movies/`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        }\n      }).then(res => {\n        // console.log(res, context)\n        console.log(res.data);\n        context.commit('GET_MOVIES', res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    getReview(context) {\n      axios({\n        method: 'get',\n        url: `${API_URL}/api/v1/articles/`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        }\n      }).then(res => context.commit('GET_REVIEWS', res.data)).catch(err => console.log(err));\n    },\n    // signUp(context, payload) {\n    //   axios({\n    //     method: 'post',\n    //     url: `${API_URL}/accounts/signup/`,\n    //     data: {\n    //       username: payload.username,\n    //       password1: payload.password1,\n    //       password2: payload.password2,\n    //     }\n    //   })\n    //     .then((res) => {\n    //       // console.log(res)\n    //       context.commit('SAVE_TOKEN', res.data.key)\n    //     })\n    // },\n    signUp(context, payload) {\n      axios({\n        method: 'post',\n        url: `${API_URL}/accounts/signup/`,\n        data: {\n          username: payload.username,\n          password1: payload.password1,\n          password2: payload.password2\n        }\n      }).then(response => {\n        context.commit('SAVE_TOKEN', response.data.key);\n        axios({\n          method: 'get',\n          url: `${API_URL}/accounts/user/`,\n          headers: {\n            Authorization: `Token ${response.data.key}`\n          }\n        }).then(response => {\n          context.commit('GET_LOGIN_USER', response.data);\n        }).catch(error => {\n          console.log(error);\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    logIn(context, payload) {\n      axios({\n        method: 'post',\n        url: `${API_URL}/accounts/login/`,\n        data: {\n          username: payload.username,\n          password: payload.password\n        }\n      }).then(response => {\n        context.commit('SAVE_TOKEN', response.data.key);\n        axios({\n          method: 'get',\n          url: `${API_URL}/accounts/user/`,\n          headers: {\n            Authorization: `Token ${response.data.key}`\n          }\n        }).then(response => {\n          context.commit('GET_LOGIN_USER', response.data);\n        }).catch(error => {\n          console.log(error);\n        });\n      }).catch(error => {\n        console.log(error);\n        window.alert('아이디와 비밀번호를 확인해주세요.');\n      });\n    },\n    getLoginUser(context) {\n      axios({\n        method: 'get',\n        url: `${API_URL}/accounts/user/`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        }\n      }).then(response => {\n        context.commit('GET_LOGIN_USER', response.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    getUserInfo(context, user_pk) {\n      axios({\n        method: 'get',\n        url: `${API_URL}/accounts_detail/${user_pk}`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        }\n      }).then(response => {\n        context.commit('GET_USER_INFO', response.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["Vue","Vuex","axios","createPersistedState","router","use","API_URL","Store","plugins","state","articles","movies","logedin_user","user_info","user_detail","token","getters","isLogin","mutations","GET_MOVIES","SAVE_TOKEN","push","name","GET_LOGIN_USER","LOG_OUT","localStorage","removeItem","GET_USER_INFO","actions","getMovies","context","method","url","headers","Authorization","then","res","console","log","data","commit","catch","err","getReview","signUp","payload","username","password1","password2","response","key","error","logIn","password","window","alert","getLoginUser","getUserInfo","user_pk","modules"],"sources":["/Users/jeontaeyeong/Desktop/1123pjt/final_pjt_front/src/store/index.js"],"sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\nimport createPersistedState from 'vuex-persistedstate'\nimport router from '@/router'\n\nVue.use(Vuex)\n\n// articles를 movielist로 수정..\n\nconst API_URL = 'http://127.0.0.1:8000'\n\n\nexport default new Vuex.Store({\n  plugins: [\n    createPersistedState()\n  ],\n  state: {\n    articles: [],\n    movies : [],\n    logedin_user: null,\n    user_info: null,\n    user_detail: null,\n    token: null,\n    //isLoggedIn : store.state.token, \n  },\n  getters: {\n    isLogin(state) {\n      return state.token ? true : false\n    }\n  },\n  mutations: {\n    GET_MOVIES(state, movies) {\n      state.movies = movies\n    },\n    // 회원가입 && 로그인\n    SAVE_TOKEN(state, token) {\n      state.token = token\n      router.push({ name: 'home' })\n    },\n    GET_LOGIN_USER(state, logedin_user) {\n      state.logedin_user = logedin_user\n      state.user_info = logedin_user\n    },\n    LOG_OUT(state) {\n      //state.recommend_movies = null\n      state.logedin_user = null\n      state.token = null\n\n      localStorage.removeItem('logedin_user')\n      localStorage.removeItem('token')\n\n      //router.push('/')\n    },\n    GET_USER_INFO(state, user_detail) {\n      state.user_detail = user_detail\n    },\n  },\n  actions: {\n    getMovies(context) {\n      axios({\n        method: 'get',\n        url: `${API_URL}/movies/`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        }\n      })\n        .then((res) => {\n          // console.log(res, context)\n          console.log(res.data)\n          context.commit('GET_MOVIES', res.data)\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    getReview(context) {\n      axios({\n        method : 'get',\n        url: `${API_URL}/api/v1/articles/`,\n        headers: {\n          Authorization: `Token ${ context.state.token }`\n        }\n      })\n        .then(res =>\n          context.commit('GET_REVIEWS', res.data)\n        )\n        .catch(err => console.log(err))\n    },\n    // signUp(context, payload) {\n    //   axios({\n    //     method: 'post',\n    //     url: `${API_URL}/accounts/signup/`,\n    //     data: {\n    //       username: payload.username,\n    //       password1: payload.password1,\n    //       password2: payload.password2,\n    //     }\n    //   })\n    //     .then((res) => {\n    //       // console.log(res)\n    //       context.commit('SAVE_TOKEN', res.data.key)\n    //     })\n    // },\n    signUp(context, payload) {\n      axios({\n        method: 'post',\n        url: `${API_URL}/accounts/signup/`,\n        data: {\n          username: payload.username,\n          password1: payload.password1,\n          password2: payload.password2\n        }\n      })\n      .then((response) => {\n        context.commit('SAVE_TOKEN', response.data.key)\n        axios({\n          method: 'get',\n          url: `${API_URL}/accounts/user/`,\n          headers: {\n            Authorization: `Token ${response.data.key}`\n          },\n        })\n        .then((response) => {\n          context.commit('GET_LOGIN_USER', response.data)\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n    },\n    logIn(context, payload) {\n      axios({\n        method: 'post',\n        url: `${API_URL}/accounts/login/`,\n        data: {\n          username: payload.username,\n          password: payload.password,\n        }\n      })\n      .then((response) => {\n        context.commit('SAVE_TOKEN', response.data.key)\n        axios({\n          method: 'get',\n          url: `${API_URL}/accounts/user/`,\n          headers: {\n            Authorization: `Token ${response.data.key}`\n          },\n        })\n        .then((response) => {\n          context.commit('GET_LOGIN_USER', response.data)\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n      })\n      .catch((error) => {\n        console.log(error)\n        window.alert('아이디와 비밀번호를 확인해주세요.')\n      })\n    },\n    getLoginUser(context) {\n      axios({\n        method: 'get',\n        url: `${API_URL}/accounts/user/`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        },\n      })\n      .then((response) => {\n        context.commit('GET_LOGIN_USER', response.data)\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n    },\n    getUserInfo(context, user_pk){\n      axios({\n        method: 'get',\n        url: `${API_URL}/accounts_detail/${user_pk}`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        },\n      })\n      .then((response) => {\n        context.commit('GET_USER_INFO', response.data)\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n    },\n  },\n  modules: {\n    },\n  })\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
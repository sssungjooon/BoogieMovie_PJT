{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nimport createPersistedState from 'vuex-persistedstate';\nimport router from '@/router';\nVue.use(Vuex);\n\n// articles를 movielist로 수정..\n\nconst API_URL = 'http://127.0.0.1:8000';\nexport default new Vuex.Store({\n  plugins: [createPersistedState()],\n  state: {\n    articles: [],\n    token: null\n  },\n  getters: {\n    isLogin(state) {\n      return state.token ? true : false;\n    }\n  },\n  mutations: {\n    GET_ARTICLES(state, articles) {\n      state.articles = articles;\n    },\n    // 회원가입 && 로그인\n    SAVE_TOKEN(state, token) {\n      state.token = token;\n      router.push({\n        name: 'ArticleView'\n      });\n    },\n    LOGOUT(state) {\n      state.username = null;\n      localStorage.removeItem('username');\n      location.reload();\n    }\n  },\n  actions: {\n    getArticles(context) {\n      axios({\n        method: 'get',\n        url: `${API_URL}/api/v1/articles/`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        }\n      }).then(res => {\n        // console.log(res, context)\n        // console.log(res.data)\n        context.commit('GET_ARTICLES', res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    signUp(context, payload) {\n      axios({\n        method: 'post',\n        url: `${API_URL}/accounts/signup/`,\n        data: {\n          username: payload.username,\n          password1: payload.password1,\n          password2: payload.password2\n        }\n      }).then(res => {\n        // console.log(res)\n        context.commit('SAVE_TOKEN', res.data.key);\n      });\n    },\n    logIn(context, payload) {\n      axios({\n        method: 'post',\n        url: `${API_URL}/accounts/login/`,\n        data: {\n          username: payload.username,\n          password: payload.password\n        }\n      }).then(res => {\n        // console.log(res)\n        context.commit('SAVE_TOKEN', res.data.key);\n      });\n    },\n    logout({\n      commit\n    }) {\n      commit('LOGOUT');\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["Vue","Vuex","axios","createPersistedState","router","use","API_URL","Store","plugins","state","articles","token","getters","isLogin","mutations","GET_ARTICLES","SAVE_TOKEN","push","name","LOGOUT","username","localStorage","removeItem","location","reload","actions","getArticles","context","method","url","headers","Authorization","then","res","commit","data","catch","err","console","log","signUp","payload","password1","password2","key","logIn","password","logout","modules"],"sources":["/Users/jeontaeyeong/Desktop/final_pjt/final_pjt_front/src/store/index.js"],"sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\nimport createPersistedState from 'vuex-persistedstate'\nimport router from '@/router'\n\nVue.use(Vuex)\n\n// articles를 movielist로 수정..\n\nconst API_URL = 'http://127.0.0.1:8000'\n\n\nexport default new Vuex.Store({\n  plugins: [\n    createPersistedState()\n  ],\n  state: {\n    articles: [],\n    token: null,\n  },\n  getters: {\n    isLogin(state) {\n      return state.token ? true : false\n    }\n  },\n  mutations: {\n    GET_ARTICLES(state, articles) {\n      state.articles = articles\n    },\n    // 회원가입 && 로그인\n    SAVE_TOKEN(state, token) {\n      state.token = token\n      router.push({ name: 'ArticleView' })\n    },\n    LOGOUT(state) {\n      state.username = null\n      localStorage.removeItem('username')\n      location.reload();\n    }\n  },\n  actions: {\n    getArticles(context) {\n      axios({\n        method: 'get',\n        url: `${API_URL}/api/v1/articles/`,\n        headers: {\n          Authorization: `Token ${context.state.token}`\n        }\n      })\n        .then((res) => {\n          // console.log(res, context)\n          // console.log(res.data)\n          context.commit('GET_ARTICLES', res.data)\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    signUp(context, payload) {\n      axios({\n        method: 'post',\n        url: `${API_URL}/accounts/signup/`,\n        data: {\n          username: payload.username,\n          password1: payload.password1,\n          password2: payload.password2,\n        }\n      })\n        .then((res) => {\n          // console.log(res)\n          context.commit('SAVE_TOKEN', res.data.key)\n        })\n    },\n    logIn(context, payload) {\n      axios({\n        method: 'post',\n        url: `${API_URL}/accounts/login/`,\n        data: {\n          username: payload.username,\n          password: payload.password,\n        }\n      })\n        .then((res) => {\n          // console.log(res)\n          context.commit('SAVE_TOKEN', res.data.key)\n        })\n    },\n    logout({commit}) {\n      commit('LOGOUT')\n    },\n  },\n  modules: {\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}